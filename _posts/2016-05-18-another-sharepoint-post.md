---
layout: post
title:  Способы организации CSS-кода
date:  2016-05-18 15:30:00
categories: Разработка
tags: article
---

Разработчик Бен Фрейн (Ben Frain) однажды заметил: «Писать CSS-код легко. Масшабировать и поддерживать его — нет».

К счастью, на просторах интернета можно найти множество решений этой проблемы. В данной статье рассмотрены основные киты структуры CSS-кода, а также интересные рыбы/млекопитающие поменьше.

Статья служит лишь памяткой или кратким справочником — для подробного ознакомления с методологиями настоятельно рекомендуется изучать оригинальную документацию.

Итак, начнем.<br>
<h2>БЭМ</h2>
<img src="https://habrastorage.org/files/dc4/809/03a/dc480903af774eab9370c85e50c8ac72.png" alt="image"/><br/>
Автор: <a href="https://ru.bem.info/authors/">Яндекс</a><br>
<a href="https://ru.bem.info/">Документация</a>

Пожалуй, самая популярная сейчас методология в мире. Название означает «Блок, элемент, модификатор». 

Эти категории играют следующие роли в коде:

> блоки могут использоваться в нескольких местах сайта;
> элементы являются частью блока и не имеют функционального смысла вне блока;
> модификаторы представляют собой свойства блока или элемента, которые меняют его внешний вид или поведение.

Из этих категорий строятся классы для непосредственного использования в CSS. При этом не следует использовать селекторы тэгов (это потенциально может помешать использовать блок/элемент в каком-то нестандартном месте на сайте, т.е. привязывает сущность к контексту); рекомендуется также избегать каскадных селекторов, т.к. получившийся класс сам по себе достаточно точно (специфично) выбирает соответствующий элемент.

Такой подход позволяет избавиться от непредсказуемых последствий каскада и изолирует отдельные модули друг от друга.

Пример кода в стиле БЭМ:

    # .block_element {...}
      .block_element-modifier {...}
     
Для удобства используются разные разделители между блоком и элементом и между блоком/элементом и модификатором; при этом можно использовать любые разделители, однако они должны быть одинаковыми в рамках одного проекта.

А теперь о бочках меда и ложках дегтя:
Хорошо: изолированность модулей друг от друга и отсутствие непредсказуемых каскадов селекторов.<br>
Плохо: не всегда длинные названия классов удобны для использования (для крупных проектов есть смысл использовать инструменты, автоматизирующие работу с БЭМ-разметкой).

Кстати, для написания кода в таком стиле раньше часто рекомендовали препроцессор Stylus, так как он позволяет писать код так:

    # .block {
        &-element {...}
       }

Сейчас так можно писать, используя как SASS, так и LESS.

И еще одно замечание — в оригинальной методологии БЭМ используются названия модификаторов, содержащие саму модифицируемую величину, например, button--sizeLarge. Сейчас в небольших проектах многие разработчики не указывают ее для лаконичности: button--large.

<a href="https://ru.bem.info/forum/-147/">Здесь</a> можно почитать про историю создания БЭМ.

<h2>OOCSS</h2>
<img src="https://habrastorage.org/files/466/3e3/813/4663e38131c24db99aa009b4a55d3235.png" alt="image"/><br/>
Автор: <a href="http://www.stubbornella.org/content/nicole-sullivan/">Николь Салливан (Nicole Sullivan)</a><br>
<a href="http://www.slideshare.net/stubbornella/object-oriented-css">Презентация</a>
OOCSS означает объектно-ориентированный CSS (Object-Oriented CSS). В этот подход заложены две основные идеи:<br/>
<br/>
<ul>
<li>Разделение структуры и оформления</li>
<li>Разделение контейнера и контента (содержимого)</li>
</ul><br/>
Итак, «разделяй и властвуй». С помощью такой структуры разработчик получает общие классы, которые можно использовать в разных местах.<br/>
<br/>
А теперь — две новости (как водится, хорошая и плохая):<br/>
<br/>
<ul>
<li>Хорошая: уменьшение количества кода за счет повторного его использования (принцип DRY).</li>
<li>Плохая: достаточно сложная поддержка: при изменении стиля конкретного элемента скорее всего придется менять не только CSS (т.к. большинство классов общие), но и добавлять классы в разметку.</li>
</ul><br/>
Кроме того, сам подход OOCSS предлагает не конкретные правила, а абстрактные рекомендации, поэтому метод достаточно сложен для применения на практике. <br/>
<br/>
Зато, как это иногда случается, некоторые идеи OOCSS вдохновили авторов на создание своих, более конкретных, способов структурирования кода — своеобразных форков OOCSS.<br/>
<a name="smacss"></a><br/>
<h2>SMACSS</h2><br/>
<img src="https://habrastorage.org/files/4dc/24a/8dc/4dc24a8dc3fb4e758adf89af4f73f66c.png" alt="image"/><br/>
<br/>
Автор: <a href="https://smacss.com/book/about">Джонатан Снук (Jonathan Snook)</a><br/>
<a href="https://smacss.com/">Документация</a><br/>
<br/>
SMACSS расшифровывается как «масштабируемая и модульная архитектура для CSS» (Scalable and Modular Architecture for CSS). <br/>
<br/>
Основная цель подхода — уменьшение количества кода и на упрощение поддержки кода. <br/>
<br/>
Итак, Джонатан предложил разделить стили на 5 частей (в порядке включения их в документ):<br/>
<br/>
<ol>
<li><b>Base rules</b> — базовые стили. Это стили основных элементов сайта — body, input, button, ul, ol и т.п. В этой секции используются в основном селекторы тэгов и атрибутов, классы — в исключительных случаях (например, если у вас стилизованные JavaScript’ом селекты);</li>
<li><b>Layout rules</b> — стили макета. Здесь находятся стили глобальных элементов размеры шапки, футера, сайдбара и т.п. Джонатан предлагает использовать здесь id в селекторах, так как эти элементы не будут встречаться более 1 раза на странице. <i>Однако автор статьи считает это плохой практикой (каждый раз, когда в стилях появляется id селектор, где-то в мире грустит котенок). Используйте классы и будет вам счастье.</i></li>
<li><b>Modules rules</b> — стили модулей, то есть блоков, которые могут использоваться несколько раз на одной странице. Для классов модулей не рекомендуется использовать id и селекторы тэгов (для многократного использования и независимости от контекста соответственно).</li>
<li><b>State rules</b> — стили состояния. В этом разделе прописываются различные состояния модулей и скелета сайта. Это единственный раздел, в котором допустимо использование ключевого слова «!important».</li>
<li><b>Theme rules</b> — оформление. Здесь описываются стили оформлений, которые со временем, возможно, нужно будет заменить (так удобно делать, например, новогоднее оформление; для html-тем, выставленных на продажу такие стили позволяют переключать цветовую гамму и т.п.).</li>
</ol><br/>
Также рекомендуется вводить неймспейсы для классов, принадлежащих к определенной группе, а также использовать отдельный неймспейс для классов, используемых в JavaScript.<br/>
<br/>
Этот подход действительно позволяет упростить написание и поддержку кода и в последнее время привлекает достаточно большое количество разработчиков.<br/>
<a name="atomic"></a><br/>
<h2>Atomic CSS</h2><br/>
<img src="https://habrastorage.org/files/b93/1f4/75b/b931f475b0984db391f1ae5cad45bced.png" alt="image"/><br/>
<br/>
Автор: <a href="https://twitter.com/thierrykoblentz">Тьерри Коблентц (Thierry Koblentz) — Yahoo</a><br/>
<a href="http://www.smashingmagazine.com/2013/10/21/challenging-css-best-practices-atomic-approach/">Оригинальная статья</a><br/>
<br/>
Atomic CSS, редко также ACSS — атомарный CSS. В некотором роде этот подход представляет собой OOCSS, возведенный в абсолют. <br/>
<br/>
При использовании такого подхода для каждого повторно используемого свойства должен быть сформирован отдельный класс. Пример: стиль «margin-top: 1px» предполагает создание класса «mt-1», стиль «width: 200px» создание класса «w-200». <br/>
<br/>
Такой стиль позволяет минимизировать объем CSS-кода за счет повторного использования деклараций, а также сравнительно легко вводить изменения в модули, к примеру, при изменении технического задания.<br/>
<br/>
Однако у этого подхода есть существенные недостатки! Вот они:<br/>
<br/>
<ul>
<li>наименования классов представляют собой описательные названия свойств, не описывая семантическую сущность элемента, что иногда может усложнить разработку;</li>
<li>настройки отображения элементов переносятся непосредственно в HTML (это не то, для чего были придуманы таблицы стилей, не так ли?).</li>
</ul><br/>
В связи с этими недостатками, подход был встречен существенным объемом критики. Тем не менее, подход может оказаться эффективным для очень больших проектов — кажется, Yahoo! вполне довольны использованием ACSS (<a href="https://www.haikudeck.com/atomic-css-science-and-technology-presentation-dJ0xlFjhBQ#">ссылка на интересную презентацию того же Тьерри Коблентца</a>).<br/>
Кроме того, атомарный CSS используется в различных фреймворках для задания корректирующих стилей элементов и в некоторых слоях других методологий. <br/>
<br/>


































